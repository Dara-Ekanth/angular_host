<form [formGroup]="form" #f="ngForm" (ngSubmit)="OnSubmit(f)">
    <div class="form-group">
        <label for="username"> User Name </label>
        <input formControlName='username' type="text" id="username" class="form-control">
        <div *ngIf="username?.pending">Username is checking...</div>
        <div class="alert alert-danger" *ngIf="username?.touched && !username?.valid">
            <div *ngIf="username?.errors?.['required']"> User Name is Mandatory.</div>
            <div *ngIf="username?.errors?.['minlength']">User Name should be Minimum of length
                {{username?.errors?.['minlength']?.['requiredLength']}}</div>
            <div *ngIf="username?.errors?.['cannotContainSpace']">User Name should not contain a space.</div>
            <div *ngIf="username?.errors?.['notunique']"> This User Name is already taken.</div>
        </div>
    </div>
    <div class="form-group">
        <label for="password">Password</label>
        <input formControlName="password" type="password" id="password" class="form-control">
        <div class="alert alert-danger" *ngIf="password?.touched && !password?.valid">Password is Mandatory.</div>
    </div>
    <button class="btn btn-primary" type="submit">Submit</button>
    <div formGroupName="details">
        <div class="form-group">
            <label for="role">Role</label>
            <input id="role" formControlName="role" type="text" class="form-control">
        </div>
        <div class="form-group">
            <div class="form-group">
                <label for="techstack">Tech Stack</label>
                <input formArrayName="techStack" id="techstack" type="text" class="form-control"
                    (keyup.enter)="AddTechStack(stack)" #stack>
            </div>
            <div>
                <ul class="list-group">
                    <li (click)="removeStack(stack)" class="list-group-item" *ngFor="let stack of techStack.controls">
                        {{stack.value}}</li>
                </ul>
            </div>

        </div>
    </div>
    <hr>
    <br>
    <div formGroupName="changepasswordform">
        <div class="form-group">
            <label for="oldpassword"> Old Password</label>
            <input formControlName="oldPassword" (keyup.enter)="oldpassworddebug(oldPassword)" id="oldpassword" type="text" class="form-control">
            <div class="alert alert-danger" *ngIf="oldPassword?.touched && oldPassword?.invalid">
                <div *ngIf="oldPassword?.value != '' && !oldPassword?.errors?.['oldmatched']">Old Password Doesn't Match.</div>
                <div *ngIf="oldPassword?.errors?.['required']">Old Password is Mandatory.</div>
            </div>
        </div>

        <div class="form-group">
            <label for="newpassword">New Password</label>
            <input id="newpassword" type="text" class="form-control" formControlName="newPassword">
            <div class="alert alert-danger" *ngIf="newPassword?.touched && newPassword?.invalid">
                <div *ngIf="newPassword?.errors?.['required']">New password is Mandatory</div>
            </div>
        </div>

        <div class="form-group">
            <label for="newPasswordConfirm">Confirm New Password</label>
            <input id="newPasswordConfirm" type="text" class="form-control" formControlName="newPasswordConfirm">
            <div class="alert alert-danger" *ngIf="newPasswordConfirm?.touched && newPasswordConfirm?.invalid">
                <div *ngIf="newPasswordConfirm?.errors?.['required']">Confirm New password is Mandatory</div>
            </div>
        </div>
    </div>
</form>